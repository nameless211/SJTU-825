# 软件测试

测试：是为了**发现错误**而执行程序的过程——调试：**定位和纠正**这些错误的过程

## 软件测试理论

### 不同术语

错误

缺陷

故障

失效

事故

### 软件测试原则

1. 测试对应用户需求
2. 不能期望穷举测试
3. 对存在错误的程序段进行重点测试（聚集性原则）
4. 尽早，不断地进行软件测试
5. 避免测试自己的程序
6. 有计划的测试
7. 从小到大的测试

### 软件的可测试性

包括对测试的难易程度的多个方面进行评估的指标

## 软件测试策略

根据被测试对象的层次，分为单元测试，集成测试和系统测试

根据测试的目的，分为功能性测试和对非功能属性的测试，如可靠性测试、易用性测试、性能测试、可移植性测试、可维护性测试

还有验收测试，α测试和β测试、安装测试、回归测试等

### 软件测试层次

简单来说，单元测试针对软件的最小模块，集成测试对多个通过单元测试的模块进行集成和测试，系统测试对整个系统进行测试

**单元测试**

-  单元测试检验模块的行为是否和设计文档中所描述的一致
- 为此，单元测试所关注的是单元的接口、局部数据结构、边界条件、独立的路径和错误处理路径。这些检查确保数据在流进流出、内部存储的完整性、特殊情况和其他所有正常情况下都能保持正确
- 单元测试由于其粒度较低，复杂度也较低，一般由程序员完成，很多时候被看作是软件编辑工作的一部分，只有在完成了单元测试之后代码才算做已经完成
- 某些软件过程中部分测试用例在软件编写之前就已经准备好
- 由于软件单元一般都只是模块的一部分，需要桩模块（供其调用）和驱动模块（提供对它的调用）

**集成测试**

- 集成测试考虑各个软件模块拼装起来的情况
- 根据不同的集成策略，分为增量式集成和一次性集成两种
  - 一次性集成：直接把一部分所有的模块拼在一起再测试
  - 增量式集成：逐步集成，边连接边测试
    - 自顶向下：根据软件的控制层次决定集成的次序，从控制模块开始向下。不需要驱动程序（因为按照原则，开始下面层次的集成时上面已经完成了）
    - 自底向上：反之，不需要桩程序
    - 混合集成：对于上层top-down，下层bottom-up
  - 一次性集成优点：可以并行的测试所有的模块，最大化利用人力

**系统测试**

对整个系统进行的测试。目的是验证系统是否符合需求规约，再细分就是是否符合功能性和非功能性需求（其中非功能性需求通常是重点）

### 软件质量属性测试

**功能性测试**

包括：

1. 安全性
2. 互操作：和规定的系统进行交互的能力
3. 适用性：为指定的用户提供可用功能的能力
4. 准确性
5. 功能依从性：遵循软件功能相关规约、标准、法规的能力（不仅要求实现所有规约中的功能，还要求符合法律规章制度）

**可靠性测试**

软件在执行条件下维持正常使用的能力

1. 成熟性：避免错误
2. 容错性：出现故障维持使用
3. 易恢复性：出问题后恢复
4. 可靠性的依从性测试

**性能测试**

软件在规定条件下，相对于所用资源可提供性能的能力

**压力测试**：在超常情况下执行程序，以获得系统对非正常情况的承受程度

**易用性测试**

评估用户学习和使用软件的难易程度、支持用户任务的有效程度，从用户的错误中恢复的程度

**可移植性测试**

迁移能力

**可维护性测试**

可以被修改的能力，包括纠正、改进或适应环境

### 其他策略

**验收测试、α和β测试**

前面的都是项目组内部的测试，验收测试是为了确定开发完成的软件是否能符合其验收标准，使客户能确定是否接受此软件系统的正式测试

α和β测试其实就是内测和公测，在验收测试之后，发放给用户进行的测试

α：内测，在开发环境中，由一部分代表性用户在开发者指导下进行的测试

β：公测：由用户脱离开发者在自己的用户环境下使用软件，在这个过程中记录下问题并报告给开发者的过程

**安装测试**

确保软件能够在支持的平台和各种条件下成功安装

**回归测试**

在软件发生改动之后进行。确保这些改动没有造成原来的软件功能出现故障或增加预期之外的行为

典型的回归测试使用之前测试用例的一个子集，有时只覆盖修改的单元还不够，需要覆盖所有可能受影响的部分

在增量式集成、迭代开发等需要不断在某个版本基础上增量式更新软件的方法中，回归测试常常需要在每次改动之后都进行

## 软件测试技术

测试策略解决测试什么，什么时候测试，而测试技术解决怎么测试。

### 测试技术分类

**按照测试人员对软件结构的了解程度**

1. 白盒测试：指测试人员完全了解软件的设计，按照内部结构进行测试。一般用于单元测试
2. 黑盒测试：完全不考虑软件的内部设计，根据软件的输入输出来进行测试。一般用于系统测试、验收测试、α和β测试中
3. 灰盒测试：结合了白盒和黑盒测试，一般用于集成测试

**按照测试的范围**

1. 通用测试技术：对各种软件普遍适用的
2. 专用测试技术：只适用于特定软件的

### 基于直觉和经验的测试

- 即兴测试

  根据测试者的经验，随机的对软件进行功能和性能抽查

  主要作为正式测试的一种补充

- 探索性测试

  不断提出假设，使用测试来验证假设，通过测试学习并完善头脑中对软件的模型，然后再进一步驱动新的假设和测试

### 基于代码的测试

这些测试建立在能够完全了解软件代码的基础上，因此都是白盒测试

#### 控制流测试

按照控制结构进行测试，基础是画出控制流图

1. 语句测试：所有语句至少执行一次（指在所有的测试用例的执行过程中）

2. 判定测试：每个判定至少取一次真和一次假，因此所有语句也一定至少执行一次

3. 条件测试：对于每个判定中的各个条件，在所有可能的取值范围中都有用例落在其中

   比如判定A<1 AND X!=0，那就要取一个>1和一个<1、一个=0一个!=0的用例，但是最终取到的用例不一定满足整个判定的一次真一次假

4. 判定/条件测试：判定+条件

5. 条件组合测试：每个判定中的各种可能的条件情况的组合都至少出现一次，前几个里面最强的一个

6. 路径测试：覆盖所有可能路径，也就是说覆盖所有可能的各个判定的组合情况，但是不一定覆盖条件的各个组合

#### 基本路径测试

画出程序的控制流图，找出它的基本路径（数量等于控制流图的圈复杂度），设计覆盖了这些基本路径的测试用例

#### 数据流测试

从对变量的定义角度来执行测试

定义-清除路径

定义-使用路径

### 基于规约的测试

通过观察输入和输出是否符合规约中的相关定义来对软件进行测试

#### 等价类

等价类：输入的某个子集，其中的各个元素对揭示某个软件错误是等效的。也就是说如果这个类中的某个数据会导致错误，那么这个类中的其他数据也会导致同样的错误，反之则都不能

有效等价类：等价类中数据符合规约

无效等价类：类中数据不符合规约

确定等价类的原则：

P262

关键是按照是否符合规约，是否通用一套处理逻辑来划分

根据有效等价类，需要设计出可以覆盖所有有效等价类的测试用例

针对每个无效等价类还要设计出另外的测试用例

#### 边界值分析

作为等价类划分的一种补充。对于边界上的值，单独选取等价类内部的值常常不具有代表性，因此需要单独对他们进行测试

关键是设计一些刚好不超出、等于以及刚好大于的值进行测试（注意其实这些值分别属于有效等价类和无效等价类，只不过他们需要额外的测试）

#### 随机测试

在软件输入域上随机选择一些输入值来测试

### 基于错误的测试

通过经验，针对可能出现的错误情况进行测试用例设计

#### 错误猜测

列举出所有可能的错误情况，并针对他们设计测试用例

#### 变异测试

对软件进行微小但合乎语法的修改，再根据一组测试用例进行测试。如果这些修改没有被检出（也就是说测试用例再原本的软件和修改后的软件中执行的结果相同），那么说明这个测试用例集还不够完善（或者这个修改是等价的）。

这种方法能够检验一组设计好的测试用例是否足够完善，也能用于生成足够完备的测试用例

根据测试用例的生成方式，变异测试可以是白盒或黑盒测试

### 基于模型的测试

基于对需求模型的分析进行测试用例设计

#### 因果图/判定表

基于需求规约，能够总结出系统行为的各个原因以及他们的组合所能导致的结果

这就导向一张由他们之间的因果关系构成的图表。包含条件之间的关系，加入的中间结果，以及条件的组合和结果的关系

根据这张图表，能够得出一张判定表，上面是各个条件的可能取值组合，以及在各个可能的取值下各结果的真假性

#### 基于有限状态机的测试

基于需求规约，将软件系统描述为一个有限状态机

测试用例的设计需要覆盖各个状态以及可能的迁移情况

#### 基于形式化规约的测试

自动化技术

### 基于应用类型的测试

针对特定软件类型的测试技术

1. 面向对象的测试

   集成测试：不适用基于层次的集成测试策略，转而使用基于线程（测试相应一个输入的一系列类）和基于使用（根据对其他类的依赖度从低到高）的测试

2. 基于构件的测试

   分为两个部分，对构件的测试以及对基于复用构件的系统的测试

   构件开发者进行的单元测试并不能预料到构件的复用场景；构件使用者进行的测试不能考虑到构件的内部结构

3. 基于Web的测试

   Web测试的重点不同，需要关注界面，导航，配置，安全性和性能测试

4. GUI测试

5. 并发程序的测试

   同一个测试用例可以随机并发或指定并发序列地执行

6. 协议一致性的测试

   检查协议的实现是否符合规约

7. 实时系统的测试

   关注时序结构的影响

## 软件测试过程

测试计划-测试设计-测试开发-测试执行-测试评估

对于被测代码来说，前三步和开发同步执行，后两步在开发完成之后执行

1. 测试计划：对测试的对象、范围、产出、过程安排、程度做声明
2. 测试设计：设计测试用例（包括复用的）
3. 测试开发：准备测试脚本、数据，准备测试平台
4. 测试执行：搭建环境，安装被测软件，进行测试并记录缺陷，标识严重等级
5. 测试评估：主要是对测试的效果和结果进行评估和分析

## 自动化测试

简单但效果没那么好











