# Memory Hierarchy

## Outline

存储器物理结构

1. RAM
2. 磁盘
3. IO
4. 访问方式
5. 存储器性能

存储器层次结构

1. 局部性原理
2. 计算机对存储器的组织
   1. Cache
      - 读、写映射方式
      - 针对缓存优化代码

## 存储器物理结构

### RAM（Random-Access Memory ）

#### SRAM

SRAM，即静态RAM，主要特点为

1. 只要有供电，就能一直保持其存储值不变
2. 访问时间短
3. 结构复杂，成本较高

#### DRAM

DRAM，即动态RAM，特点为：

1. 

1. 对干扰敏感，不仅可能因为微小扰动失去所存储的值，也会因为漏电而随着时间失去所存储的值
2. 访问时间较短
3. 结构简单

这些特性造就了它们不同的用途

DRAM——主存，缓冲区

SRAM——Cache高速缓存

#### DRAM的结构与访问模式

- DRAM中对外最小的单元为超单元（supercell），访问DRAM以它为单位。

  每个超单元由多个DRAM单元组成，每个DRAM单元能存储一位的信息

- 每个超单元中含有ω个DRAM单元，DRAM芯片的内存由d个超单元组织成的阵列（对应长宽r、c，rc=d）构成。也就是说一个d$\times$ω的DRAm芯片即是含有d个超单元，其中每个超单元含有ω个DRAM单元

  另外还有一个行缓冲区，在寻址时使用，大小为r$\times$ω

- DRAM芯片通过引脚来获取和向外传递信息。一个引脚一次能传递一位信息。

  以16$\times$8的芯片为例，有8个data引脚用于传递一整个超单元，以及2个地址引脚用于传递在寻址时所需要的行/列信息。

##### 通过内存控制器访问DRAM的过程

内存控制器能够一次读取或传送ω位的信息，以读取（i，j）位置的超单元为例

1. 内存控制器发送i到DRAM，DRAM将i行的内容复制到行缓冲区
2. 内存控制器发送j到DRAM，DRAM将行缓冲区第j个超单元的内容复制出来，并且发送给内存控制器

*传递行、列使用的是同几个引脚

可以看到，通过控制阵列的长、宽，能够保证地址引脚的数量尽量少，但是却需要发送两次，是典型的trade-off设计

#### 内存模块



